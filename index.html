<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flip the Coin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      @keyframes flip {
        0% {
          transform: rotateY(0deg);
        }
        50% {
          transform: rotateY(180deg);
        }
        100% {
          transform: rotateY(360deg);
        }
      }

      .flip {
        animation: flip 1s ease-in-out;
      }
      #button:hover {
        scale: 110%;
        transition: all 200ms;
      }

      #coin {
        transform-style: preserve-3d;
      }

      #button:active {
        scale: 100%;
        transition: all 200ms;
      }
    </style>
  </head>

  <body
    style="
      height: 100vh;
      overflow: hidden;
      background-color: #404a65;
      font-family: Kanit, sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: start;
      align-items: center;
      gap: 2rem;
    "
  >
    <div
      style="
        background-color: orange;
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 5px;
        justify-content: center;
        align-items: center;
        margin-top: 2rem;
      "
    >
      <h4
        style="
          font-size: 5rem;

          color: white;
          -webkit-text-stroke: 5px #35383f;
          font-weight: bolder;
          margin: 0px;
        "
      >
        Flip the coin
      </h4>

      <h1 style="color: white; font-size: 2rem; line-height: 0rem">
        Press the coin or the button to flip the coin
      </h1>
    </div>
    <img
      id="coin"
      src="resources/heads.svg"
      style="width: 14rem; cursor: pointer"
      alt="Coin"
    />

    <img src="resources/shadow.svg" alt="Shadow" />

    <span
      id="answer"
      style="
        line-height: 0rem;
        text-align: center;
        font-size: 2.5rem;
        color: white;
        font-weight: bold;
      "
      >Head</span
    >

    <div
      id="button"
      style="
        margin-top: 3rem;
        border-radius: 15px;
        padding: 0.5rem 3rem;
        background-color: #1f6fb0;
        cursor: pointer;
      "
    >
      <span
        style="
          text-align: center;
          font-size: 2.5rem;
          color: white;
          font-weight: bold;
        "
        >FLIP</span
      >
    </div>

    <script>
      const button = document.getElementById("button");
      const coin = document.getElementById("coin");
      const answerEl = document.getElementById("answer");

      const makeDecision = () => {
        const isHead = Math.random() < 0.5;
        const newFace = isHead ? "heads" : "tails";

        // Add flip animation class
        coin.classList.add("flip");

        // When animation ends, change image and remove class
        coin.addEventListener(
          "animationend",
          () => {
            coin.src = `resources/${newFace}.svg`;
            coin.classList.remove("flip");
          },
          { once: true }
        ); // `{ once: true }` ensures it runs only once

        // Update answer text
        answerEl.textContent = isHead ? "Head" : "Tail";

        console.log("Coin flipped: ", newFace);
      };

      coin.addEventListener("click", makeDecision);
      button.addEventListener("click", makeDecision);
    </script>
  </body>
</html>
